###############################################################################
# .dockerignore — Controls what enters the Docker build context
#
# DockerfileLocal does `COPY ./ /git/apollos-ai`, so anything NOT excluded
# here ends up in the image. Keep this tight for security and image size.
###############################################################################

###############################################################################
# Security-critical exclusions (MUST be first — never remove these)
###############################################################################

# Environment files (secrets, API keys, passwords)
*.env
*.env.*
.env*

# Private keys and certificates (safety net — catches stray key files anywhere)
**/*.key
**/*.pem
**/*.p12
**/*.pfx
**/*.crt

# Deployment configs (contains certs dir, compose secrets, infra layout)
deploy/

# User data directory (contains .env, workdir, agent data)
usr/*

# AI agent session data
.agent/**
.claude/**

###############################################################################
# Build infrastructure (not needed inside the container)
###############################################################################

# Docker build files (already consumed by COPY ./docker/run/fs/ step)
docker/base/
docker/run/build.txt
docker/run/docker-compose.yml

# CI/CD and GitHub config
.github/

# Development tooling
mise.toml
mise.local.toml
hk.pkl
cliff.toml
biome.json

# IDE configurations
.vscode/
.cursor/
.windsurf/
.serena/

# Documentation (not needed at runtime)
docs/

###############################################################################
# Project-specific exclusions
###############################################################################

# Obsolete directories
memory/**
instruments/**
knowledge/custom/**

# Logs, tmp
logs/*
tmp/*

# Tests (not needed in production image)
tests/
/*.test.py
.coverage
coverage.xml
htmlcov/

# Git
.git/

# Git worktrees
.worktrees/

# Python virtual environments
.venv/
.conda/

# Research and scratchpad
.local_docs/
.scratchpad/
.full-review/
SECURITY_AUDIT.md

# Apollos AI local data
my-data/

# Drift analysis (caches and temporary data)
.drift/lake/
.drift/cache/
.drift/history/
.drift/call-graph/
.drift/patterns/discovered/
.drift/patterns/ignored/
.drift/patterns/variants/
.drift/constraints/discovered/
.drift/constraints/ignored/
.drift/contracts/discovered/
.drift/contracts/ignored/
.drift/contracts/mismatch/
.drift/**/.backups/
.drift/memory/

###############################################################################
# Re-includes (MUST come after exclusions)
###############################################################################

# Keep .gitkeep markers
!**/.gitkeep

# Keep .env.example templates (no secrets, useful for documentation)
!**/.env.example

###############################################################################
# Universal junk / caches (MUST BE LAST — overrides re-includes above)
###############################################################################

# OS / editor junk
**/.DS_Store
**/Thumbs.db

# Python caches / compiled artifacts
**/__pycache__/
**/*.py[cod]
**/*.pyo
**/*.pyd
.ruff_cache/
.pytest_cache/

# Node (if present)
node_modules/

# Backup files
**/*.bak
**/*~
**/*.swp
